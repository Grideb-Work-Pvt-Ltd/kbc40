
@{
    Layout = "~/Views/Shared/_Layoutadmin.cshtml";
}

<div class="content-wrapper">
    <section class="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12 col-xs-12 pb-4" style="box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;">
                    <h3 class="text-center" style=" background-color: #000 !important; color:#fff;">Crowd Wallet</h3>
                    <hr />
                    <h3 style="text-align: center;">@ViewBag.tp2</h3>
                    <form asp-action="crowdwallet" asp-controller="admin">
                        <div class="form-group col-md-4 mx-auto">
                            <label for="formGroupExampleInput">User Id</label>
                            <input type="text" class="form-control" name="userid" id="userid" placeholder="user id" onchange="myFunction()">
                            <input type="text" class="form-control" readonly id="name" name="name">
                             <canvas id="qrcode"></canvas>
 
                        </div>


                        <div class="text-center" hidden>
                            <button type="submit" class="btn btn-primary pl-5 pr-5">Submit</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </section>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script language="javascript" type="text/javascript">
    function myFunction() {
        var x = document.getElementById("userid").value;

        $.ajax({
            url: '../Home/MyAction',
            data: { id: x },
            type: "POST",
            success: function (data) {
                console.log(data);
                document.getElementById("name").value = data.name;
                generateQR(x);
            }
        });
    };
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script>
    function generateQR(userid) {
        var text = "https://kbc40.com/home/identity/" + userid + "";
        var canvas = document.getElementById("qrcode");
        canvas.innerHTML = ""; // Clear previous content
        var qr = new QRious({
            element: canvas,
            value: text,
            size: 200

        });
    }
   
</script>
